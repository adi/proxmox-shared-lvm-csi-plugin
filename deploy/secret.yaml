---
apiVersion: v1
kind: Secret
metadata:
  name: proxmox-csi-config
  namespace: kube-system
type: Opaque
stringData:
  config.yaml: |
    clusters:
      - url: "https://proxmox.example.com:8006/api2/json"
        token_id: "csi@pve!csi-token"
        token_secret: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
        region: "cluster-1"
        insecure: false  # Set to true to skip TLS verification

# To create this secret, copy this file and update with your credentials:
# kubectl apply -f secret.yaml

# To create an API token in Proxmox:
# 1. Login to Proxmox web interface
# 2. Navigate to Datacenter > Permissions > API Tokens
# 3. Click "Add" to create a new token
# 4. User: csi@pve (or create a dedicated user)
# 5. Token ID: csi-token
# 6. Privilege Separation: Uncheck (or assign appropriate permissions)
# 7. Copy the generated token secret
#
# Required Proxmox permissions for the CSI token user:
# - Datastore.Allocate
# - Datastore.AllocateSpace
# - VM.Config.Disk
# - VM.Audit
